<<<<<<< HEAD
# quality_problem_prevention
=======
# å“è³ªå•é¡Œå¯¾å¿œRAGã‚·ã‚¹ãƒ†ãƒ 

ç‰¹å®šã®ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹å“è³ªãƒ‡ãƒ¼ã‚¿ã‚„æ˜¯æ­£ç­–ã«é–¢ã™ã‚‹è³‡æ–™ã‚’æ‹¡å¼µæ¤œç´¢ã—ã€éŽåŽ»ã®æ¡ˆä»¶ã®å†…å®¹ç¢ºèªã‚„é¡žä¼¼æ¡ˆä»¶ã‚’å‘¼ã³å‡ºã›ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

## æ©Ÿèƒ½

- ðŸ“ **è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼å¯¾å¿œ**: PDF, Excel, Word, CSV, ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•èª­è¾¼
- ðŸ” **é¡žä¼¼æ¤œç´¢**: ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã«ã‚ˆã‚Šé¡žä¼¼æ¡ˆä»¶ã‚’æ¤œç´¢
- ðŸ’¬ **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–Q&A**: è‡ªç„¶è¨€èªžã§è³ªå•ã—ã¦é–¢é€£æƒ…å ±ã‚’å–å¾—
- ðŸ“Š **ã‚½ãƒ¼ã‚¹è¡¨ç¤º**: å›žç­”ã®å‚ç…§å…ƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ˜Žç¤º
- ðŸ”„ **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç®¡ç†**: ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ™‚ã®å†æ§‹ç¯‰æ©Ÿèƒ½

## å¿…è¦ç’°å¢ƒ

- Python 3.11+
- OpenAI APIã‚­ãƒ¼

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

OpenAI APIã‚­ãƒ¼ã‚’ç’°å¢ƒå¤‰æ•°ã«è¨­å®šã—ã¦ãã ã•ã„:

```bash
export OPENAI_API_KEY='your-api-key-here'
```

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ«ãƒ€ã®æº–å‚™

å“è³ªãƒ‡ãƒ¼ã‚¿ã‚„æ˜¯æ­£ç­–è³‡æ–™ã‚’ `data/` ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®ã—ã¾ã™:

```
data/
  â”œâ”€â”€ å“è³ªå•é¡Œå ±å‘Š_2024.xlsx
  â”œâ”€â”€ æ˜¯æ­£ç­–_äº‹ä¾‹é›†.pdf
  â”œâ”€â”€ æ”¹å–„ææ¡ˆæ›¸.docx
  â””â”€â”€ ...
```

å¯¾å¿œãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼:
- `.txt` - ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
- `.pdf` - PDFãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `.xlsx`, `.xls` - Excel
- `.docx`, `.doc` - Word
- `.csv` - CSVãƒ•ã‚¡ã‚¤ãƒ«

### 3. åˆå›žå®Ÿè¡Œ

```bash
python main.py
```

åˆå›žå®Ÿè¡Œæ™‚ã«è‡ªå‹•çš„ã«ãƒ™ã‚¯ãƒˆãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒæ§‹ç¯‰ã•ã‚Œã¾ã™ã€‚

## ä½¿ã„æ–¹

### ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼

```
1. è³ªå•ã™ã‚‹ï¼ˆé€šå¸¸æ¤œç´¢ï¼‰
2. é¡žä¼¼æ¡ˆä»¶ã‚’æ¤œç´¢
3. é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¡¨ç¤º
4. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å†æ§‹ç¯‰
5. çµ‚äº†
```

### 1. è³ªå•ã™ã‚‹ï¼ˆé€šå¸¸æ¤œç´¢ï¼‰

è‡ªç„¶è¨€èªžã§è³ªå•ã™ã‚‹ã¨ã€RAGã‚·ã‚¹ãƒ†ãƒ ãŒé–¢é€£æƒ…å ±ã‚’æ¤œç´¢ã—ã¦å›žç­”ã—ã¾ã™ã€‚

**ä¾‹:**
```
è³ªå•: æº¶æŽ¥ä¸è‰¯ã®æ˜¯æ­£ç­–ã‚’æ•™ãˆã¦ãã ã•ã„
```

ã‚·ã‚¹ãƒ†ãƒ ãŒéŽåŽ»ã®é¡žä¼¼æ¡ˆä»¶ã‹ã‚‰å­¦ç¿’ã—ã€å…·ä½“çš„ãªæ˜¯æ­£ç­–ã¨å†ç™ºé˜²æ­¢ç­–ã‚’ææ¡ˆã—ã¾ã™ã€‚

### 2. é¡žä¼¼æ¡ˆä»¶ã‚’æ¤œç´¢

ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€é¡žä¼¼åº¦ã‚¹ã‚³ã‚¢ä»˜ãã§é–¢é€£æ¡ˆä»¶ã‚’ä¸€è¦§è¡¨ç¤ºã—ã¾ã™ã€‚

**ä¾‹:**
```
æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: å¯¸æ³•ä¸è‰¯
```

### 3. é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¡¨ç¤º

ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«é–¢é€£ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å†…å®¹ã‚’ç›´æŽ¥è¡¨ç¤ºã—ã¾ã™ï¼ˆLLMå‡¦ç†ãªã—ï¼‰ã€‚

### 4. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å†æ§‹ç¯‰

ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ«ãƒ€ã«æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ãŸå ´åˆã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å†æ§‹ç¯‰ã—ã¾ã™ã€‚

## è©³ç´°è¨­å®š

### ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ«ãƒ€ã®å¤‰æ›´

ç’°å¢ƒå¤‰æ•°ã§ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã§ãã¾ã™:

```bash
export QUALITY_DATA_FOLDER='/path/to/your/data'
python main.py
```

### ãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´

`rag/query_handler.py` ã® `RAGQueryHandler` ã‚¯ãƒ©ã‚¹ã§ä½¿ç”¨ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’å¤‰æ›´ã§ãã¾ã™:

```python
handler = RAGQueryHandler(model_name="gpt-4")  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ gpt-4o-mini
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
.
â”œâ”€â”€ main.py                          # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ loaders/                         # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ load_documents.py           # å„ç¨®ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã®èª­è¾¼
â”œâ”€â”€ vectorstore/                     # ãƒ™ã‚¯ãƒˆãƒ«ã‚¹ãƒˆã‚¢ç®¡ç†
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ build_vectorstore.py        # FAISSã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹ç¯‰
â”œâ”€â”€ rag/                             # RAGæ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ query_handler.py            # ã‚¯ã‚¨ãƒªå‡¦ç†ã¨æ¤œç´¢
â”œâ”€â”€ data/                            # ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ«ãƒ€ï¼ˆè¦ä½œæˆï¼‰
â”‚   â””â”€â”€ (ã“ã“ã«è³‡æ–™ã‚’é…ç½®)
â””â”€â”€ faiss_index/                     # ç”Ÿæˆã•ã‚Œã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
    â””â”€â”€ (è‡ªå‹•ç”Ÿæˆ)
```

## ä¸»è¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### DocumentLoader (`loaders/load_documents.py`)

è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã«å¯¾å¿œã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­è¾¼ã‚¯ãƒ©ã‚¹ã€‚ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ã™ã¹ã¦ã®ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•çš„ã«èª­ã¿è¾¼ã¿ã¾ã™ã€‚

### VectorStoreBuilder (`vectorstore/build_vectorstore.py`)

FAISSãƒ™ã‚¯ãƒˆãƒ«ã‚¹ãƒˆã‚¢ã®æ§‹ç¯‰ã¨ç®¡ç†ã‚’è¡Œã„ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é©åˆ‡ãªã‚µã‚¤ã‚ºã®ãƒãƒ£ãƒ³ã‚¯ã«åˆ†å‰²ã—ã€ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã—ã¾ã™ã€‚

### RAGQueryHandler (`rag/query_handler.py`)

RAGæ¤œç´¢ã®ä¸­æ ¸æ©Ÿèƒ½ã‚’æä¾›:
- `handle_query()`: è³ªå•ã«å¯¾ã—ã¦å›žç­”ã‚’ç”Ÿæˆ
- `search_similar_cases()`: é¡žä¼¼æ¡ˆä»¶ã‚’æ¤œç´¢
- `get_relevant_documents()`: é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å–å¾—
- `search_by_keywords()`: è¤‡æ•°ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆ

å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:

```bash
pip install -r requirements.txt
```

### ãƒ™ã‚¯ãƒˆãƒ«ã‚¹ãƒˆã‚¢ãŒèª­ã¿è¾¼ã‚ãªã„å ´åˆ

ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å†æ§‹ç¯‰:

```bash
# ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œ4. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å†æ§‹ç¯‰ã€ã‚’é¸æŠž
```

### OpenAI APIã‚¨ãƒ©ãƒ¼

APIã‚­ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª:

```bash
echo $OPENAI_API_KEY
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## é–‹ç™ºè€…å‘ã‘æƒ…å ±

### ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å¤‰æ›´

`rag/query_handler.py` ã® `prompt_template` ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ã§ã€AIã®å›žç­”ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºã§ãã¾ã™ã€‚

### æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã®è¿½åŠ 

`loaders/load_documents.py` ã® `supported_extensions` è¾žæ›¸ã«æ–°ã—ã„å½¢å¼ã¨ãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’è¿½åŠ ã§ãã¾ã™ã€‚

### æ¤œç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¿æ•´

- `chunk_size`: ãƒ†ã‚­ã‚¹ãƒˆåˆ†å‰²ã®ã‚µã‚¤ã‚ºï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1000ï¼‰
- `chunk_overlap`: ãƒãƒ£ãƒ³ã‚¯é–“ã®é‡è¤‡ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 200ï¼‰
- `k`: æ¤œç´¢çµæžœæ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 5ï¼‰

ã“ã‚Œã‚‰ã¯å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§èª¿æ•´å¯èƒ½ã§ã™ã€‚
>>>>>>> 270022c (initial commit)
